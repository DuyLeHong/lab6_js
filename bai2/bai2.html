<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        .tictactoe {
            width: 300px;
            display: flex;
            flex-wrap: wrap;
        }

        button {
            width: calc(100% / 3 - 6px);
            height: 96px;
            background-color: #ccc;
            margin: 2px;
            border: none;
            cursor: pointer;
            color: #fff;
            font-size: 30px;
            font-weight: 700;
        }
    </style>
</head>

<body>
    <div class="tictactoe">
        <button></button>
        <button></button>
        <button></button>
        <button></button>
        <button></button>
        <button></button>
        <button></button>
        <button></button>
        <button></button>
    </div>
    <script>
        let flat = false;
        let counter = 0;
        let btn = document.querySelectorAll('button');

        let arrX = [];
        let arrO = [];

        for (let index = 1; index <= btn.length; index++) {
            const element = btn[index - 1];
            element.addEventListener('click', () => {
                counter++;
                if (flat) {
                    element.style.backgroundColor = 'red';
                    element.innerText = 'X';
                    flat = false;
                    arrX.push(index);
                } else {
                    element.style.backgroundColor = 'blue';
                    element.innerText = 'O';
                    flat = true;
                    arrO.push(index);
                }

                element.style.pointerEvents = 'none';

                checkResult();

                if (counter == 9) {
                    confirm('2 ben Hoa');
                    location.reload();
                }
            });
        }

        function checkResult() {

            let arrWins = [];

            let arrWin1 = [1, 2, 3];
            let arrWin2 = [4, 5, 6];
            let arrWin3 = [7, 8, 9];
            let arrWin4 = [1, 5, 9];
            let arrWin5 = [3, 5, 7];
            let arrWin6 = [1, 4, 7];
            let arrWin7 = [3, 6, 9];
            let arrWin8 = [2, 5, 8];

            arrWins = [arrWin1, arrWin2, arrWin3, arrWin4, arrWin5, arrWin6, arrWin7, arrWin8];

            for (let arrWin of arrWins) {
                console.log(arrWin);
                if (checkArrContainsAnother(arrX, arrWin)) {
                    confirm('Ben X thang');
                    location.reload();
                    return;
                }
                if (checkArrContainsAnother(arrO, arrWin)) {
                    confirm('Ben O thang');
                    location.reload();
                    return;
                }
            }

            // kiem tra arrX hoac arrY co chua arrWin khong
        }

        function checkArrContainsAnother(source, target) {
            var result = source.filter(function (item) { 
                return target.indexOf(item) > -1 });
            return (result.length == 3);
        }
    </script>
</body>

</html>